{"version":3,"sources":["webpack:///./src/components/Entities.js","webpack:///./src/components/MainCreative.js","webpack:///./src/pages/creative.js"],"names":["Entities","props","_this","_React$PureComponent","call","this","positionedImageAsset","node","index","arr","vector","level","rot","hPos","vPos","pos","fluid","childImageSharp","distanceBetween","state","Math","floor","length","react_default","a","createElement","AReactImage","key","id","rotation","width","height","position","builtImageAssets","data","allFile","edges","map","builtVideoAssets","video1Pos","video2Pos","fullLength","store","getState","getImages","Fragment","AReactVideo","src","spherical","radius","builtAframeAssets","geometry","color","imagesPerSide","numberOfSides","entities","componentDidMount","_this2","__webpack_require__","e","then","t","bind","aframe","setState","catch","error","console","render","React","PureComponent","MainCreative","aframeLoaded","components","registerComponent","init","_this3","el","addEventListener","document","querySelector","getAttribute","paused","play","pause","oops","_this4","_element","sceneEl","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","loadedContent","cursor","embedded","style","Assets","components_Entities","Cameras","CreativePage","_React$Component","loading","setWrapperRef","assertThisInitialized_default","timeoutId","setTimeout","s","setInterval","opacity","display","componentWillUnmount","clearTimeout","wrapperRef","Layout","location","className","SmallHeader","timeout","active","GyroController","components_MainCreative","Instructions","Footer","Component","fluidImage","pageQuery"],"mappings":"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","file":"component---src-pages-creative-js-191d4ce4ed64664b708f.js","sourcesContent":["import React from 'react'\nimport AReactImage from './AReactImage'\nimport AReactVideo from './AReactVideo'\nimport store from '../state/store';\n\nclass Entities extends React.PureComponent {\n  constructor(props){\n    super();\n    this.state={\n      distanceBetween:60,\n      imagesPerSide: 40,\n      numberOfSides: 4,\n      entities:null\n    }\n  }\n\n  positionedImageAsset = ( node, index, arr, vector, level ) => {\n    const fluid = node.node.childImageSharp.fluid;\n    let rot, hPos, vPos, pos;\n    let distanceBetween = this.state.distanceBetween;\n    switch(vector){\n      case 'xPos':\n        rot =  index % 2 === 0 ? \"0 180 0\" : \"0 0 0\";\n        vPos = Math.floor(arr.length/4) - Math.floor(index/2);\n        pos =  index % 2 === 0 ?\n          `${distanceBetween * vPos} ${(level * 800)+2} ${distanceBetween}` :\n          `${distanceBetween * vPos} ${(level * 800)+2} ${-distanceBetween}`;\n        return (\n          <AReactImage key={node.node.id} fluid={fluid} rotation={rot} width={distanceBetween} height={distanceBetween} position={pos} />\n        )\n      case 'xNeg':\n        break;\n      case 'zPos':\n        rot =  index % 2 === 0 ? \"0 270 0\" : \"0 90 0\";\n        hPos = Math.floor(arr.length/4) - Math.floor(index/2);\n        distanceBetween = this.state.distanceBetween;\n        pos =  index % 2 === 0 ?\n          `${distanceBetween} ${(level * 800)+2} ${distanceBetween * hPos}` :\n          `${-distanceBetween} ${(level * 800)+2} ${distanceBetween * hPos}`;\n        return (\n          <AReactImage key={node.node.id} fluid={fluid} rotation={rot} width={distanceBetween} height={distanceBetween} position={pos} />\n        )\n      case 'zNeg':\n      default:\n        break;\n    }\n  }\n\n  builtImageAssets = ( vector, level ) => {\n    const imageAssets =this.props.data.allFile.edges.map((node, index, arr) => {\n      if(node && node.node && node.node.childImageSharp && node.node.childImageSharp.fluid){\n        return this.positionedImageAsset(node, index, arr, vector, level);\n      }else{\n        return null;\n      }\n    })\n    return imageAssets;\n  }\n\n  builtVideoAssets = ( vector, level ) => {\n    let video1Pos, video2Pos, rot;\n    let fullLength = store().getState().getImages.length/3;\n    switch(vector){\n      case 'xPos':\n        rot =  index => index % 2 === 0 ? \"0 270 0\" : \"0 90 0\";\n        video1Pos = `${-fullLength * 2 * this.state.distanceBetween} ${(level * 800)+120} 0`;\n        video2Pos = `${fullLength * 2 * this.state.distanceBetween} ${(level * 800)+120} 0`;\n        break;\n      case 'xNeg':\n        break;\n      case 'zPos':\n        rot =  index => index % 2 === 0 ? \"0 180 0\" : \"0 0 0\";\n        video1Pos = `0 ${(level * 800)+120} ${-fullLength * this.state.distanceBetween}`;\n        video2Pos = `0 ${(level * 800)+120} ${fullLength * this.state.distanceBetween}`;\n        break;\n      case 'zNeg':\n      default:\n        break;\n    }\n    return (\n      <>\n      <AReactVideo src=\"#mixVideo\" id=\"mix\" spherical={true} width={400} height={400} radius=\"750\" position={video1Pos} />\n      <AReactVideo src=\"#haightVideo\" id=\"haight\" rotation={rot(1)} width={600} height={340} position={video2Pos} />\n      </>\n    );\n  }\n\n  builtAframeAssets = () =>  <a-sky geometry=\"radius:8000\" color=\"#fff\" src=\"#universe_4096Image\" />;\n\n  componentDidMount(){\n    import('aframe')\n      .then((aframe) => {\n        this.setState({\n          entities:(\n              <a-entity>\n                { this.builtAframeAssets() }\n                { this.builtImageAssets('xPos', -.1)  }\n                { this.builtImageAssets('zPos', -.1) }\n                { this.builtVideoAssets('xPos', 0) }\n                { this.builtVideoAssets('zPos', 0) }\n              </a-entity>\n          )})\n      })\n      .catch((error) => console.error(error));\n  }\n  render() {\n    return this.state.entities;\n  }\n}\n\nexport default Entities\n\n//   <a-plane material=\"opacity:0.31\" un-planned-texture position=\"0 -100 4\" rotation=\"-90 0 0\" width=\"5000\" height=\"5000\" color=\"#111\" />\n","import React from 'react'\nimport Assets from './Assets'\nimport Cameras from './Cameras'\nimport Entities from './Entities'\n\nclass MainCreative extends React.PureComponent {\n  constructor(props){\n    super();\n    this.state={\n      aframeLoaded: null,\n    }\n  }\n  componentDidMount(){\n    import('aframe')\n      .then((aframe) => {\n        if(!!!aframe.components['video-texture']){\n          aframe.registerComponent(\"video-texture\", {\n            init: function() {\n              this.el.addEventListener(\"click\", (e) => {\n                try{\n                  if(document.querySelector(this.el.getAttribute('src')).paused){\n                    document.querySelector(this.el.getAttribute('src')).play()\n                  }else{\n                    document.querySelector(this.el.getAttribute('src')).pause()\n                  }\n                }catch(oops){}\n              })\n            }\n          })\n\n          aframe.registerComponent(\"plane-texture\", {\n            init: function() {\n              this.el.addEventListener(\"click\", (e) => {\n                let _element = this.el.sceneEl;\n                if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement) {\n                  if (document.cancelFullScreen) {\n                      document.cancelFullScreen();\n                  } else {\n                      if (document.mozCancelFullScreen) {\n                          document.mozCancelFullScreen();\n                      } else {\n                          if (document.webkitCancelFullScreen) {\n                              document.webkitCancelFullScreen();\n                          }\n                      }\n                  }\n                } else {\n                    if (_element.requestFullscreen) {\n                        _element.requestFullscreen();\n                    } else {\n                        if (_element.mozRequestFullScreen) {\n                            _element.mozRequestFullScreen();\n                        } else {\n                            if (_element.webkitRequestFullscreen) {\n                                _element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n                            }\n                        }\n                    }\n                }\n              })\n            }\n          })\n        }\n        this.setState({\n          aframeLoaded: true,\n          loadedContent:(\n            <main>\n              <a-scene cursor=\"rayOrigin: mouse\" embedded style={{width:'100%',height:'100%'}}>\n                <Assets data={this.props.data} />\n                <Entities data={this.props.data} />\n                <Cameras data={this.props.data} />\n              </a-scene>\n            </main>\n          )})\n      })\n      .catch((error) => console.error(error));\n  }\n  render() {\n    return this.state.loadedContent ? this.state.loadedContent : '...';\n  }\n}\n\nexport default MainCreative\n","import React from 'react'\nimport { graphql } from 'gatsby'\nimport Layout from '../components/Layout'\nimport GyroController from '../components/GyroController'\nimport SmallHeader from '../components/SmallHeader'\nimport MainCreative from '../components/MainCreative'\nimport Footer from '../components/Footer'\n\nclass CreativePage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: 'is-loading'\n    }\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n  }\n\n  componentDidMount () {\n    this.timeoutId = setTimeout(() => {\n      let s=document.querySelector('#instructions').style;\n      setInterval(() => {\n        if(s.opacity>0){\n          s.opacity=s.opacity-0.001;\n        }else{\n          s.display='none';\n        }\n\n      },2000)\n      this.setState({\n        loading: '',\n      });\n    }, 500);\n  }\n\n  componentWillUnmount () {\n    if (this.timeoutId) {\n        clearTimeout(this.timeoutId);\n    }\n  }\n\n  setWrapperRef(node) {\n    this.wrapperRef = node;\n  }\n\n  render() {\n    return (\n      <Layout location={this.props.location} position={this.state.position}>\n        <div id=\"subwrapper\" className=\"page\">\n        <SmallHeader timeout={this.state.timeout} active=\"creative\" />\n          <GyroController>\n            <MainCreative data={this.props.data} setWrapperRef={this.setWrapperRef} />\n            { Instructions() }\n          </GyroController>\n          <Footer  timeout={this.state.timeout} />\n        </div>\n        <div id=\"bg\"></div>\n      </Layout>\n    )\n  }\n}\n\nexport default CreativePage\n\nconst Instructions = () => {\n  return (\n    <div className=\"content\" id=\"instructions\">\n        <div className=\"inner\">\n          <h3>a device-only experience</h3>\n          <p className=\"singleSpace\">\n            from the center, tilt up or down\n         <br />\n           in one of the four directions\n          <br/>\n            selecting elements at the end\n           </p>\n      </div>\n    </div>\n  );\n}\n\nexport const fluidImage = graphql`\nfragment fluidImage on File {\n  childImageSharp {\n    fluid(maxWidth: 1024) {\n      ...GatsbyImageSharpFluid\n    }\n  }\n}\n`;\n\n\nexport const pageQuery = graphql`\nquery pageQuery{\n  allFile{\n    edges{\n      node{\n        id\n        ...fluidImage\n      }\n    }\n  }\n}\n`;\n"],"sourceRoot":""}